<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>测试 API Key</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    input { width: 300px; padding: 8px; margin: 10px 0; }
    button { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; }
    .result { margin-top: 20px; padding: 10px; background: #f5f5f5; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>和风天气 API Key 测试</h1>
  <input type="text" id="apiKey" placeholder="输入你的 API Key" />
  <input type="text" id="city" value="北京" placeholder="城市名称" />
  <button onclick="test()">测试</button>
  <div id="result" class="result"></div>

  <script>
    async function test() {
      const apiKey = document.getElementById('apiKey').value;
      const city = document.getElementById('city').value;
      const resultDiv = document.getElementById('result');

      if (!apiKey) {
        resultDiv.textContent = '请输入 API Key';
        return;
      }

      try {
        const response = await fetch(`https://kt487t53tq.re.qweatherapi.com/v7/weather/now?location=${city}`, {
          headers: { 'X-QW-Api-Key': apiKey }
        });

        const result = await response.json();

        if (response.ok && result.code === '200') {
          resultDiv.innerHTML = `<strong style="color: green">成功!</strong>
${JSON.stringify(result, null, 2)}`;
        } else {
          resultDiv.innerHTML = `<strong style="color: red">失败: ${response.status}</strong>
${JSON.stringify(result, null, 2)}`;
        }
      } catch (error) {
        resultDiv.innerHTML = `<strong style="color: red">错误: ${error.message}</strong>`;
      }
    }
  </script>
</body>
</html>
